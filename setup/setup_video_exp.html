
<html>
<head>  
	<meta http-equiv="cache-control" content="no-store, no-cache, must-revalidate"></meta>
    <link rel="stylesheet" type="text/css" href='/css/style.css'>
    <script type="text/javascript" src="/js/js.js"></script>
</head>

<body  id="body_exp" topmargin="0" leftmargin="0" rightmargin="0" bottommargin="0" scroll="no" bgcolor="#f5f5f5">	
	<table border="0" cellspacing="0" cellpadding="1" width="98%"  style="margin-top:15px">
		<tr id="TR_VIDEO_WB_MODE">
			<td width="50%" align="right">
				<label id="SETTING_VIDEO_WB_MODE">White Balance</label>&nbsp;&nbsp;
			</td>
			<td width="50%" align="left">
				<select id="VIDEO_WB_MODE" onchange="WBOnChange()">
					<option value="AUTO" id="SELECT_VIDEO_WB_MODE_AUTO">AUTO</option>
					<option value="MANUAL" id="SELECT_VIDEO_WB_MODE_MANUAL">MANUAL</option>
				</select>
				<input id="SETTING_VIDEO_WB_HOLD" name="SETTING_VIDEO_WB_HOLD" type="button" value="Hold" onclick="WBHold()">
			</td>
		</tr>
		<tr id="TR_VIDEO_WB_R_GAIN">
			<td width="50%" align="right">
				<label id="SETTING_VIDEO_R_GAIN">R Gain</label>&nbsp;&nbsp;
			</td>
			<td width="50%" align="left">
				<input id="VIDEO_WB_R_GAIN" type="text" size="4"> <label>[1~255]</label>
			</td>
		</tr>
		<tr id="TR_VIDEO_WB_B_GAIN">
			<td width="50%" align="right">
				<label id="SETTING_VIDEO_B_GAIN">B Gain</label>&nbsp;&nbsp;
			</td>
			<td width="50%" align="left">
				<input id="VIDEO_WB_B_GAIN" type="text" size="4"> <label>[1~255]</label>
			</td>
		</tr>
	</table>	
	<table border="0" cellspacing="0" cellpadding="1" width="98%"  style="margin-top:10px">
		<tr>
			<td></td>
			<td align="left" width="65%">
				<input type="radio" id="SETTING_IQ"  name="Q_TYPE" onclick="UI_CHANGE()">
				<label id="SETTING_IMAGE_QUALITY_PRIORITY">Image Quality Priority</label>
			</td>
		</tr>
		<tr>
			<td></td>
			<td align="left" width="65%">
				<input type="radio" id="SETTING_FR"  name="Q_TYPE" onclick="UI_CHANGE()">
				<label id="SETTING_FRAME_RATE_PRIORITY">Frame Rate Priority</label>
			</td>			
		</tr>
		<tr>
			<td></td>
			<td align="left" width="65%">
				<input type="radio" id="SETTING_EX"  name="Q_TYPE" onclick="UI_CHANGE()">
				<label id="SETTING_EXPERT_SETTINGS">Expert Settings</label>
			</td>
		</tr>
	</table>
	<table id="Table_EXP" border="0" cellspacing="0" cellpadding="1" width="98%"  style="margin-top:10px">	
		<tr id="TR_IR_EXPOSURE_COMPENSATION" style="display:none">
			<td width="50%" align="right">
				<label id="SETTING_IR_EXPOSURE_COMPENSATION">IR Exposure Compensation</label>&nbsp;&nbsp;
			</td>
			<td width="50%" align="left">
				<input id="IR_EXPOSURE_COMPENSATION" type="checkbox">
			</td>
		</tr>
		<tr id="TR_VIDEO_EXPOSURE_MODE">
			<td width="50%" align="right">
				<label id="SETTING_VIDEO_EXPOSURE_MODE">Exposure Mode</label>&nbsp;&nbsp;
			</td>
			<td width="50%" align="left">
				<select id="VIDEO_EXPOSURE_MODE" onchange="ExpOnChange()">
					<option value="AUTO">AUTO</option>
					<option value="SHUTTER_PRIORITY">SHUTTER_PRIORITY</option>
					<option value="IRIS_PRIORITY">IRIS_PRIORITY</option>
					<option value="MANUAL">MANUAL</option>
				</select>
			</td>
		</tr>
		
		<!--<tr id="TR_VIDEO_WB_R_GAIN">
			<td width="50%" align="right">
				<label id="SETTING_VIDEO_R_GAIN">R Gain</label>&nbsp;&nbsp;
			</td>
			<td width="50%" align="left">
				<input id="VIDEO_WB_R_GAIN" type="text" size="4"> <label>[1~255]</label>
			</td>
		</tr>
		<tr id="TR_VIDEO_WB_B_GAIN">
			<td width="50%" align="right">
				<label id="SETTING_VIDEO_B_GAIN">B Gain</label>&nbsp;&nbsp;
			</td>
			<td width="50%" align="left">
				<input id="VIDEO_WB_B_GAIN" type="text" size="4"> <label>[1~255]</label>
			</td>
		</tr>-->	
		<tr id="TR_VIDEO_AGC_GAIN">
			<td width="50%" align="right">
				<label id="SETTING_VIDEO_AGC_GAIN">AE Reference target</label>&nbsp;&nbsp;
			</td>
			<td width="50%" align="left">
				<select id="VIDEO_AGC_GAIN">
					<option value="1">1</option>
					<option value="128" selected="selected">128</option>
					<option value="255">255</option>
				</select>
			</td>
		</tr>		
		<tr id="TR_VIDEO_EXPOSURE_GAIN">
			<td width="50%" align="right">
				<label id="SETTING_VIDEO_EXPOSURE_GAIN">Exposure Gain</label>&nbsp;&nbsp;
			</td>
			<td width="50%" align="left">
				<select id="VIDEO_EXPOSURE_GAIN">
				</select>
			</td>
		</tr>	
		<tr id="TR_VIDEO_MAX_SHUTTER">
			<td width="50%" align="right">
				<label id="SETTING_VIDEO_AUTO_SHUTTER_SPEED">Slowest Auto Shutter</label>&nbsp;&nbsp;
			</td>
			<td width="50%" align="left">
				<select id="VIDEO_MAX_SHUTTER">				
				</select>
			</td>
		</tr>	
		<tr id="TR_VIDEO_SHUTTER_SPEED">
			<td width="50%" align="right">
				<label id="SETTING_VIDEO_SHUTTER_SPEED">Shutter Speed</label>&nbsp;&nbsp;
			</td>
			<td width="50%" align="left">
				<select id="VIDEO_SHUTTER_SPEED">					
				</select>
				<!--<select>
					<option value="1/5">1/5</option>
					<option value="1/15">1/15</option>
					<option selected value="1/30">1/30</option>
					<option value="1/60">1/60</option>
					<option value="1/120">1/120</option>
					<option value="1/250">1/250</option>
					<option value="1/500">1/500</option>
					<option value="1/1000">1/1000</option>
					<option value="1/2000">1/2000</option>
					<option value="1/5000">1/5000</option>
					<option value="1/10000">1/10000</option>
					<option value="1/20000">1/20000</option>
					<option value="1/30000">1/30000</option>
					<option value="1/32000">1/32000</option>
				</select>-->
			</td>
		</tr>		
		<tr id="TR_VIDEO_IRIS">
			<td width="50%" align="right">
				<label id="SETTING_VIDEO_IRIS_CONTROL">F-Number of IRIS Control</label>&nbsp;&nbsp;
			</td>
			<td width="50%" align="left">
				<select id="VIDEO_IRIS">
					<option value="F10">F1.0</option>
					<option value="F14">F1.4</option>
					<option value="F20">F2.0</option>
					<option value="F28">F2.8</option>
					<option value="F40">F4.0</option>
					<option value="F56">F5.6</option>
					<option value="F80">F8.0</option>
				</select>
			</td>
		</tr>
		<tr id="TR_VIDEO_DC_IRIS">
			<td width="50%" align="right">
				<label id="SETTING_VIDEO_DC_IRIS_CONTROL">DC IRIS Level</label>&nbsp;&nbsp;
			</td>
			<td width="50%" align="left">
				<select id="VIDEO_DC_IRIS">					
				</select>
			</td>
		</tr>
		
		
		<tr id="TR_VIDEO_MAX_IRIS">
			<td width="50%" align="right">
				<label id="SETTING_VIDEO_MAX_IRIS">Max. Auto IRIS F-Number</label>&nbsp;&nbsp;
			</td>
			<td width="50%" align="left">
				<select id="VIDEO_MAX_IRIS">
					<option value="F10">F1.0</option>
					<option value="F14">F1.4</option>
					<option value="F20">F2.0</option>
					<option value="F28">F2.8</option>
					<option value="F40">F4.0</option>
					<option value="F56">F5.6</option>
					<option value="F80">F8.0</option>
				</select>
			</td>
		</tr>
			
		<tr id="TR_PIRIS_OPTION" style="display:none">
			<td width="50%" align="right">
				<label id="SETTING_VIDEO_VIDEO_PIRIS">P-IRIS</label>&nbsp;&nbsp;
			</td>
			<td width="50%" align="left">
				<select id="PIRIS_OPTION">
					<option value="0">Disable</option>
					<option value="1">Enable</option>
				</select>
			</td>
		</tr>
	</table>
	<table border="0" cellspacing="0" cellpadding="1" width="98%"  style="margin-top:1px">	
		<tr height="40px">
			<td align="right">
				<input name="BUTTON_APPLY" class="button2" type="button" id="BUTTON_APPLY" value="Apply" onclick="DoApply()" />&nbsp;&nbsp;&nbsp; 
			</td>
			<td align="left">
				&nbsp;&nbsp;&nbsp; <input name="BUTTON_RESET" class="button2" type="button" id="BUTTON_RESET" value="Reset" onclick="doGetSettings()"/>
			</td> 
		</tr>
	</table>


</body>

</html>

<Script type="text/javascript" language="javascript">
    var gIRIS_CAP;
	var EXPOSURE_PROFILE;
	
	function ExposureChange()
	{
		var szEncoder = "/cgi-bin/encoder?USER="+ top.gAccount +"&PWD="+ top.gPwd;
		szEncoder += "&VIDEO_EXPOSURE_PROFILE="+EXPOSURE_PROFILE;	
		doRequest(szEncoder);
		parent.GetConfig();
	}
	
	function UI_CHANGE()
	{
		if(idget("SETTING_IQ").checked == true)
		{
			idget("Table_EXP").style.display = "none";	
			EXPOSURE_PROFILE  = "IQ";	
		}
		if(idget("SETTING_FR").checked == true)
		{
			idget("Table_EXP").style.display = "none";
			EXPOSURE_PROFILE  = "FR";
		}	
		if(idget("SETTING_EX").checked == true )
		{
			idget("Table_EXP").style.display = "";
			EXPOSURE_PROFILE  = "EX";	
		}
		window.setTimeout("ExposureChange();", 50);
	}
	
	function WBHold(){
		var szEncoder = "/cgi-bin/encoder?USER="+ top.gAccount +"&PWD="+ top.gPwd;
		szEncoder += "&VIDEO_WB_MODE=HOLD";
		var szReturn = doRequest(szEncoder) ;
		parent.GetConfig();
		doGetSettings();

	}
	
	function DoApply()
	{
		idget("BUTTON_APPLY").value = "Saving..." ;
		idget("BUTTON_APPLY").disabled = true ;
		var szEncoder = "/cgi-bin/encoder?USER="+ top.gAccount +"&PWD="+ top.gPwd;
		
		szEncoder += "&VIDEO_EXPOSURE_MODE="+ idget("VIDEO_EXPOSURE_MODE").value;
		szEncoder += "&VIDEO_WB_MODE="+ idget("VIDEO_WB_MODE").value;
		szEncoder += "&VIDEO_WB_GAIN="+ idget("VIDEO_WB_R_GAIN").value + "," + idget("VIDEO_WB_B_GAIN").value;
		szEncoder += "&VIDEO_AGC_GAIN="+ idget("VIDEO_AGC_GAIN").value;
		szEncoder += "&IRIS_NUMBER="+ idget("VIDEO_IRIS").value;
		szEncoder += "&VIDEO_EXPOSURE_GAIN="+ idget("VIDEO_EXPOSURE_GAIN").value;
		szEncoder += "&VIDEO_MAX_SHUTTER="+ idget("VIDEO_MAX_SHUTTER").value;
		szEncoder += "&VIDEO_SHUTTER_SPEED="+ idget("VIDEO_SHUTTER_SPEED").value;
		//szEncoder += "&PIRIS_OPTION="+ idget("PIRIS_OPTION").value;
		if(top.gDNElement.indexOf("IRLED")!= -1)
		{
			if(idget("IR_EXPOSURE_COMPENSATION").checked == true)
				szEncoder += "&IR_EXPOSURE_COMPENSATION=1";
			else
				szEncoder += "&IR_EXPOSURE_COMPENSATION=0";
		}
		var szReturn = doRequest(szEncoder) ;
		parent.GetConfig();
		doGetSettings();
		window.setTimeout("top.clean_result(this);", 2000 );		
	}
	
	function ExpOnChange()
	{		
		switch (idget("VIDEO_EXPOSURE_MODE").value){
			default:
			case "AUTO":
				idget("TR_VIDEO_AGC_GAIN").style.display="";
				idget("TR_VIDEO_EXPOSURE_GAIN").style.display="none";
				idget("TR_VIDEO_MAX_SHUTTER").style.display="";
				idget("TR_VIDEO_SHUTTER_SPEED").style.display="none";
				idget("TR_VIDEO_IRIS").style.display="none";
				idget("TR_VIDEO_DC_IRIS").style.display="none";
				idget("TR_VIDEO_MAX_IRIS").style.display="none";
				break;
			case "SHUTTER_PRIORITY":
				idget("TR_VIDEO_AGC_GAIN").style.display="";
				idget("TR_VIDEO_EXPOSURE_GAIN").style.display="none";
				idget("TR_VIDEO_MAX_SHUTTER").style.display="none";
				idget("TR_VIDEO_SHUTTER_SPEED").style.display="";
				idget("TR_VIDEO_IRIS").style.display="none";
				idget("TR_VIDEO_DC_IRIS").style.display="none";
				idget("TR_VIDEO_MAX_IRIS").style.display="none";
				break;
			case "IRIS_PRIORITY":
				idget("TR_VIDEO_AGC_GAIN").style.display="";
				idget("TR_VIDEO_EXPOSURE_GAIN").style.display="none";
				idget("TR_VIDEO_MAX_SHUTTER").style.display="none";
				idget("TR_VIDEO_SHUTTER_SPEED").style.display="none";
				idget("TR_VIDEO_IRIS").style.display="";
				idget("TR_VIDEO_DC_IRIS").style.display="";
				idget("TR_VIDEO_MAX_IRIS").style.display="none";
				break;
			case "MANUAL":
				idget("TR_VIDEO_AGC_GAIN").style.display="none";
				idget("TR_VIDEO_EXPOSURE_GAIN").style.display="";
				idget("TR_VIDEO_MAX_SHUTTER").style.display="none";
				idget("TR_VIDEO_SHUTTER_SPEED").style.display="";
				/*if((top.gIRIS_Control=='1') || (top.gIRIS_Control=='2'))
					idget("TR_VIDEO_IRIS").style.display="";
				else
					idget("TR_VIDEO_IRIS").style.display="none";*/
				if(gIRIS_CAP == "IRIS1") {	
					idget("TR_VIDEO_DC_IRIS").style.display="";
					idget("TR_VIDEO_IRIS").style.display="none";
				}
				if(gIRIS_CAP == "IRIS2") {	
					idget("TR_VIDEO_DC_IRIS").style.display="none";
					idget("TR_VIDEO_IRIS").style.display="";	
				}	
				idget("TR_VIDEO_MAX_IRIS").style.display="none";
				break;
		}		
	}
	
	function WBOnChange()
	{		
		if(idget("VIDEO_WB_MODE").value == "AUTO")
		{
			idget("TR_VIDEO_WB_R_GAIN").style.display = "none";
			idget("TR_VIDEO_WB_B_GAIN").style.display = "none";
			idget("SETTING_VIDEO_WB_HOLD").style.display = "";
		}
		else
		{
			idget("TR_VIDEO_WB_R_GAIN").style.display = "";
			idget("TR_VIDEO_WB_B_GAIN").style.display = "";
			idget("SETTING_VIDEO_WB_HOLD").style.display = "none";			
		}
	}
	
	
	function SetupShutterSpeed()
	{
		var video_shutter_speed;
		if(parent.CameraConf.LINE_FREQ == "50HZ")
		{
			UpdateSelectOptions_2(idget("VIDEO_SHUTTER_SPEED"), ManualShtSpd50Hz, ManualShtSpd50HzInverse);
			SelectSetOption(idget("VIDEO_SHUTTER_SPEED"), parent.CameraConf.VIDEO_SHUTTER_SPEED);
			UpdateSelectOptions_2(idget("VIDEO_MAX_SHUTTER"), MaxShtSpdIndex, MaxShtSpd50Hz);
			SelectSetOption(idget("VIDEO_MAX_SHUTTER"), parent.CameraConf.VIDEO_MAX_SHUTTER);
		}
		else
		{
			UpdateSelectOptions_2(idget("VIDEO_SHUTTER_SPEED"), ManualShtSpd60Hz, ManualShtSpd60HzInverse);
			SelectSetOption(idget("VIDEO_SHUTTER_SPEED"), parent.CameraConf.VIDEO_SHUTTER_SPEED);
			UpdateSelectOptions_2(idget("VIDEO_MAX_SHUTTER"), MaxShtSpdIndex, MaxShtSpd60Hz);
			SelectSetOption(idget("VIDEO_MAX_SHUTTER"), parent.CameraConf.VIDEO_MAX_SHUTTER);
		}	
	}
	
	var MaxShtSpd50Hz = ""; 
	var ManualShtSpd50Hz = "";	
	var ManualShtSpd50HzInverse = "";	
		
	var MaxShtSpd60Hz = "";
	var ManualShtSpd60Hz = "";	
	var ManualShtSpd60HzInverse = "";	
	
	var MaxShtSpdIndex = "";
	
	function Create60HzShtSpd()
	{
		var tmp2;
		var i;
		var index = [];
		tmp2 = MaxShtSpd50Hz.split(',');	
		MaxShtSpd60Hz = "";
		MaxShtSpdIndex = "";
		ManualShtSpd60HzInverse = "";	
		for(i = 0 ; i < tmp2.length ; i++)
		{
			switch(tmp2[i])
			{
				case '1/1':					
					index[i] = 10;
					break;
				case '1/2':					
					index[i] = 11;
					break;
				case '1/5':					
					index[i] = 4;
					break;				
				case '1/13':
					tmp2[i] = '1/15';
					index[i] = 14;
					break;
				case '1/25':
					tmp2[i] = '1/30';
					index[i] = 2;
					break;	
				case '1/50':
					tmp2[i] = '1/60';
					index[i] = 1;
					break;	
				case '1/100':
					tmp2[i] = '1/120';
					index[i] = 5;
					break;	
				case '1/250':
					index[i] = 6;
					break;
				case '1/500':					
					index[i] = 7;
					break;	
				case '1/1000':					
					index[i] = 8;
					break;	
				case '1/2000':					
					index[i] = 9;
					break;	
				case '1/4000':					
					index[i] = 15;
					break;	
				case '1/8000':					
					index[i] = 16;
					break;
				case '1/16000':					
					index[i] = 17;
					break;
				case '1/30000':					
					index[i] = 18;
					break;	
				case '1/32000':					
					index[i] = 19;
					break;	
				case '1/64000':					
					index[i] = 20;
					break;		
			}
			if(i != (tmp2.length-1))
			{
				MaxShtSpd60Hz += tmp2[i] + ",";
				MaxShtSpdIndex += index[i] + ",";
			}	
			else	
			{
				MaxShtSpd60Hz += tmp2[i] ;
				MaxShtSpdIndex += index[i] ;	
			}	
		}		
		
		tmp2 = ManualShtSpd50HzInverse.split(',');
		for(i = 0 ; i < tmp2.length ; i++)
		{
			switch(tmp2[i])
			{
				case '1/13':
					tmp2[i] = '1/15';				
					break;
				case '1/25':
					tmp2[i] = '1/30';					
					break;	
				case '1/50':
					tmp2[i] = '1/60';					
					break;	
				case '1/100':
					tmp2[i] = '1/120';					
					break;	
				
			}
			
			if(i != (tmp2.length-1))			
				ManualShtSpd60HzInverse += tmp2[i] + ",";
			else				
				ManualShtSpd60HzInverse += tmp2[i] ;			
			
		}		
		
		tmp2 = ManualShtSpd60HzInverse.split(',');
		for(i = 0 ; i < tmp2.length ; i++)
		{
			switch(tmp2[i])
			{
				case '1/5':
					tmp2[i] = '5';				
					break;
				case '1/15':
					tmp2[i] = '15';					
					break;	
				case '1/30':
					tmp2[i] = '30';					
					break;	
				case '1/60':
					tmp2[i] = '60';					
					break;						
				case '1/120':
					tmp2[i] = '120';				
					break;
				case '1/250':
					tmp2[i] = '250';					
					break;	
				case '1/500':
					tmp2[i] = '500';					
					break;	
				case '1/1000':
					tmp2[i] = '1000';					
					break;	
				case '1/2000':
					tmp2[i] = '2000';					
					break;	
				case '1/4000':
					tmp2[i] = '4000';					
					break;	
				case '1/8000':
					tmp2[i] = '8000';					
					break;		
				case '1/16000':
					tmp2[i] = '16000';					
					break;	
				case '1/30000':
					tmp2[i] = '30000';					
					break;
				case '1/32000':
					tmp2[i] = '32000';					
					break;	
				case '1/64000':
					tmp2[i] = '64000';					
					break;		
				
			}
			
			if(i != (tmp2.length-1))			
				ManualShtSpd60Hz += tmp2[i] + ",";
			else				
				ManualShtSpd60Hz += tmp2[i] ;					
		}							
	}


	function Create50HzShtSpd()
	{
		var tmp;
		var i;
		var index = [];
		tmp = MaxShtSpd60Hz.split(',');	
		MaxShtSpd50Hz = "";
		MaxShtSpdIndex = "";
		ManualShtSpd50HzInverse = "";	
		for(i = 0 ; i < tmp.length ; i++)
		{
			switch(tmp[i])
			{
				case '1/1':					
					index[i] = 10;
					break;
				case '1/2':					
					index[i] = 11;
					break;
				case '1/5':					
					index[i] = 4;
					break;	
				case '1/15':
					tmp[i] = '1/13';
					index[i] = 14;
					break;
				case '1/30':
					tmp[i] = '1/25';
					index[i] = 2;
					break;	
				case '1/60':
					tmp[i] = '1/50';
					index[i] = 1;
					break;	
				case '1/120':
					tmp[i] = '1/100';
					index[i] = 5;
					break;	
				case '1/250':
					index[i] = 6;
					break;	
				case '1/500':					
					index[i] = 7;
					break;	
				case '1/1000':					
					index[i] = 8;
					break;	
				case '1/2000':					
					index[i] = 9;
					break;
				case '1/4000':					
					index[i] = 15;
					break;	
				case '1/8000':					
					index[i] = 16;
					break;
				case '1/16000':					
					index[i] = 17;
					break;
				case '1/30000':					
					index[i] = 18;
					break;	
				case '1/32000':					
					index[i] = 19;
					break;	
				case '1/64000':					
					index[i] = 20;
					break;	
			}
			if(i != (tmp.length-1))
			{
				MaxShtSpd50Hz += tmp[i] + ",";
				MaxShtSpdIndex += index[i] + ",";
			}	
			else	
			{
				MaxShtSpd50Hz += tmp[i] ;
				MaxShtSpdIndex += index[i] ;	
			}			
		}	

		tmp = ManualShtSpd60HzInverse.split(',');
		
		for(i = 0 ; i < tmp.length ; i++)
		{
			switch(tmp[i])
			{
				case '1/15':
					tmp[i] = '1/13';				
					break;
				case '1/30':
					tmp[i] = '1/25';					
					break;	
				case '1/60':
					tmp[i] = '1/50';					
					break;	
				case '1/120':
					tmp[i] = '1/100';					
					break;	
				
			}
			
			if(i != (tmp.length-1))			
				ManualShtSpd50HzInverse += tmp[i] + ",";
			else				
				ManualShtSpd50HzInverse += tmp[i] ;			
			
		}

		tmp = ManualShtSpd50HzInverse.split(',');
		for(i = 0 ; i < tmp.length ; i++)
		{
			switch(tmp[i])
			{
				case '1/5':
					tmp[i] = '5';				
					break;
				case '1/13':
					tmp[i] = '13';					
					break;	
				case '1/25':
					tmp[i] = '25';					
					break;	
				case '1/50':
					tmp[i] = '50';					
					break;	
					
				case '1/100':
					tmp[i] = '100';				
					break;
				case '1/250':
					tmp[i] = '250';					
					break;	
				case '1/500':
					tmp[i] = '500';					
					break;	
				case '1/1000':
					tmp[i] = '1000';					
					break;	
				case '1/2000':
					tmp[i] = '2000';					
					break;	
				case '1/4000':
					tmp[i] = '4000';					
					break;	
				case '1/8000':
					tmp[i] = '8000';					
					break;		
				case '1/16000':
					tmp[i] = '16000';					
					break;	
				case '1/30000':
					tmp[i] = '30000';					
					break;
				case '1/32000':
					tmp[i] = '32000';					
					break;	
				case '1/64000':
					tmp[i] = '64000';					
					break;		
				
			}
			
			if(i != (tmp.length-1))			
				ManualShtSpd50Hz += tmp[i] + ",";
			else				
				ManualShtSpd50Hz += tmp[i] ;			
		}				
	}	
	
	function InverseShtSpd50Hz()
	{
		var tmp,tmp2;
		var i;
		tmp = MaxShtSpd50Hz.split(',');	
		MaxShtSpd50Hz = "";
		ManualShtSpd50HzInverse = "";	
		for(i = 0 ; i < tmp.length ; i++)
		{							
			if(i != (tmp.length-1))
				MaxShtSpd50Hz += "1/" + tmp[i] + ",";
			else	
				MaxShtSpd50Hz += "1/" + tmp[i] ;
		}	
		
		tmp = ManualShtSpd50Hz.split(',');
		for(i = 0 ; i < tmp.length ; i++)
		{							
			if(i != (tmp.length-1))
				ManualShtSpd50HzInverse += "1/" + tmp[i] + ",";
			else	
				ManualShtSpd50HzInverse += "1/" + tmp[i] ;
		}	

		
		
	}

	function InverseShtSpd60Hz()
	{
		var tmp;
		var i;
		tmp = MaxShtSpd60Hz.split(',');	
		MaxShtSpd60Hz = "";
		ManualShtSpd60HzInverse = "";
		for(i = 0 ; i < tmp.length ; i++)
		{							
			if(i != (tmp.length-1))
				MaxShtSpd60Hz += "1/" + tmp[i] + ",";
			else	
				MaxShtSpd60Hz += "1/" + tmp[i] ;
		}		
		tmp = ManualShtSpd60Hz.split(',');
		for(i = 0 ; i < tmp.length ; i++)
		{							
			if(i != (tmp.length-1))
				ManualShtSpd60HzInverse += "1/" + tmp[i] + ",";
			else	
				ManualShtSpd60HzInverse += "1/" + tmp[i] ;
		}		
	}
	
	function ShutterCap()
	{	
		var tmp;
		tmp = parent.CameraConf.SHUTTER_CAP.split('-');
		if(parent.CameraConf.LINE_FREQ == "50HZ")
		{
			MaxShtSpd50Hz = tmp[0];
			ManualShtSpd50Hz = tmp[1];
			InverseShtSpd50Hz();
			Create60HzShtSpd();				
		}
		else
		{
			MaxShtSpd60Hz = tmp[0];
			ManualShtSpd60Hz = tmp[1];
			InverseShtSpd60Hz();
			Create50HzShtSpd();			
		}
					
	}
	
	function GetIRISCap()
	{
		var gIRIS_CAP_value;
		var gIRIS_CAP_tmp;
		var szEncoder = "/cgi-bin/encoder?USER="+ top.gAccount +"&PWD="+ top.gPwd+"&IRIS_CAP";
		var szReturn = doRequest(szEncoder) ;		
		szReturn = szReturn.split('\n') ;

		for (nIdx=0; nIdx< szReturn.length; nIdx++) {
			szTmp = doSplitValue( szReturn[nIdx] ) ;
			switch ( szTmp[0] ) {
				case "IRIS_CAP":
					var argv=szTmp[1].split(',');
					gIRIS_CAP = argv[0];
					gIRIS_CAP_value = szTmp[1].slice(6);
					
					if(argv[0] == 'NONE')
					{						
						idget("TR_VIDEO_IRIS").style.display="none";
						idget("TR_VIDEO_DC_IRIS").style.display="none";
					}
					else if(argv[0] == 'IRIS1')
					{						
						InsertSelectOptions_Number(idget("VIDEO_DC_IRIS"), argv[1], argv[2]);
					}
					else	//IRIS2
					{						
						if( gIRIS_CAP_value.indexOf("10") ) 
							gIRIS_CAP_tmp = gIRIS_CAP_value.replace("10","1.0");
						if( gIRIS_CAP_value.indexOf("14") )	
							gIRIS_CAP_tmp = gIRIS_CAP_tmp.replace("14","1.4");
						if( gIRIS_CAP_value.indexOf("20") )	
							gIRIS_CAP_tmp = gIRIS_CAP_tmp.replace("20","2.0");
						if( gIRIS_CAP_value.indexOf("28") )
							gIRIS_CAP_tmp = gIRIS_CAP_tmp.replace("28","2.8");
						if( gIRIS_CAP_value.indexOf("40") )
							gIRIS_CAP_tmp = gIRIS_CAP_tmp.replace("40","4.0");
						if( gIRIS_CAP_value.indexOf("56") )
							gIRIS_CAP_tmp = gIRIS_CAP_tmp.replace("56","5.6");
						if( gIRIS_CAP_value.indexOf("80") )
							gIRIS_CAP_tmp = gIRIS_CAP_tmp.replace("80","8.0");
						//temporarily hard code
						//UpdateSelectOptions_2(idget("VIDEO_IRIS"),"F10,F14,F20,F28,F40,F56,F80" ,"F1.0,F1.4,F2.0,F2.8,F4.0,F5.6,F8.0" );	
						UpdateSelectOptions_2(idget("VIDEO_IRIS"),gIRIS_CAP_value ,gIRIS_CAP_tmp );						
					}
					break;
					
			}
		}	
		
	}
	
	function GetIRExComCap()
	{
		var szEncoder = "/cgi-bin/encoder?USER="+ top.gAccount +"&PWD="+ top.gPwd+"&IR_EXPOSURE_COMPENSATION";
		var szReturn = doRequest(szEncoder) ;		
		szReturn = szReturn.split('\n') ;
		for (nIdx=0; nIdx< szReturn.length; nIdx++) {
			szTmp = doSplitValue( szReturn[nIdx] ) ;
			switch ( szTmp[0] ) {
				case "IR_EXPOSURE_COMPENSATION":
					if(szTmp[1]==1)
						idget("IR_EXPOSURE_COMPENSATION").checked = true;
					else	
						idget("IR_EXPOSURE_COMPENSATION").checked = false;
				break;		
			}
		}	
	}
	
	function doGetSettings()
	{
		GetIRISCap();
		
		if(top.gDNElement.indexOf("IRLED")!= -1)
			GetIRExComCap();
		SelectSetOption(idget("VIDEO_EXPOSURE_MODE"), parent.CameraConf.VIDEO_EXPOSURE_MODE);
		SelectSetOption(idget("VIDEO_EXPOSURE_GAIN"), parent.CameraConf.VIDEO_EXPOSURE_GAIN);
		SelectSetOption(idget("VIDEO_AGC_GAIN"), parent.CameraConf.VIDEO_AGC_GAIN);
		SelectSetOption(idget("VIDEO_IRIS"), parent.CameraConf.IRIS_NUMBER);
		SelectSetOption(idget("VIDEO_WB_MODE"), parent.CameraConf.VIDEO_WB_MODE);
		idget("VIDEO_WB_R_GAIN").value = parent.CameraConf.VIDEO_WB_R_GAIN;
		idget("VIDEO_WB_B_GAIN").value = parent.CameraConf.VIDEO_WB_B_GAIN;
		
		if(idget("VIDEO_EXPOSURE_MODE").value == "MANUAL")
			parent.idget("TabDN").style.display = "none";
		else
		{
			if(top.gDNCtrl != "None")
				parent.idget("TabDN").style.display = "";
		}
		
		if(parent.CameraConf.VIDEO_EXPOSURE_PROFILE =="IQ")
			idget("SETTING_IQ").checked = true;
		if(parent.CameraConf.VIDEO_EXPOSURE_PROFILE =="FR")
			idget("SETTING_FR").checked = true;	
		if(parent.CameraConf.VIDEO_EXPOSURE_PROFILE =="EX")
			idget("SETTING_EX").checked = true;	
		UI_CHANGE();	
		
		ShutterCap();
		SetupShutterSpeed();
		
		WBOnChange();
		ExpOnChange();
	}
	
	function update_language()
	{
		
		var len = idget("VIDEO_EXPOSURE_MODE").options.length;
		var i = 0;
		for(i = 0; i < len ; i++)
		{
			if(idget("VIDEO_EXPOSURE_MODE").options[i].text == "AUTO")			
				try { idget("VIDEO_EXPOSURE_MODE").options[i].text = top.GetXmlLangTagByName("SELECT_VIDEO_EXPOSURE_MODE_AUTO") ; } catch(e) {}							
			else if(idget("VIDEO_EXPOSURE_MODE").options[i].text == "SHUTTER_PRIORITY")
				try { idget("VIDEO_EXPOSURE_MODE").options[i].text = top.GetXmlLangTagByName("SELECT_VIDEO_EXPOSURE_MODE_SHUTTER_PRIORITY") ; } catch(e) {}							
			else if(idget("VIDEO_EXPOSURE_MODE").options[i].text == "IRIS_PRIORITY")
				try { idget("VIDEO_EXPOSURE_MODE").options[i].text = top.GetXmlLangTagByName("SELECT_VIDEO_EXPOSURE_MODE_IRIS_PRIORITY") ; } catch(e) {}								
			else	
				try { idget("VIDEO_EXPOSURE_MODE").options[i].text = top.GetXmlLangTagByName("SELECT_VIDEO_EXPOSURE_MODE_MANUAL") ; } catch(e) {}								
		}
		
		
		top.update_language(this);
	}
	
	function PageOnload()
	{	
		/*if(top.gHIGH_FRAME_MODE_CAP != "None" && top.gHighFpsMode != "OFF") { 
			idget("VIDEO_MAX_SHUTTER").disabled =true;
			idget("VIDEO_SHUTTER_SPEED").disabled =true;			
		}*/
		if(top.gDNElement.indexOf("IRLED")!= -1)
		{
			idget("TR_IR_EXPOSURE_COMPENSATION").style.display = "";
			idget("body_exp").scroll = "auto";
		}	
		UpdateSelectOptions(idget("VIDEO_EXPOSURE_MODE"), parent.CameraConf.EXPOSURE_MODE_CAP);
		InsertSelectOptions_Number(idget("VIDEO_EXPOSURE_GAIN"), 1, 255);
		InsertSelectOptions_Number(idget("VIDEO_AGC_GAIN"), 1, 255);
		if(parent.document.getElementById("media_id").value != 1)
		{
			parent.document.getElementById("media_id").value = 1;
			if(top.IsIE() == true)
				parent.ECMSetup();				
		}		
		parent.document.getElementById("media_id").style.display = "none";				
		doGetSettings();
		update_language();	
		if(top.IsIE() == false)
			idget("body_exp").style.backgroundColor = document.styleSheets[0].cssRules[0].styleSheet.cssRules[5].style.backgroundColor;
		else
			idget("body_exp").style.backgroundColor = document.styleSheets[0].imports[0].rules[5].style.backgroundColor;		
				
	}
	PageOnload();	
</Script>
